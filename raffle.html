<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é­”å¹»éšæœºäº‹ä»¶æŠ½å¥–ç³»ç»Ÿ</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background-color: #f0f5ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #333;
        }
        .container {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 0 25px rgba(70, 130, 180, 0.2);
            padding: 30px;
            width: 90%;
            max-width: 800px;
            text-align: center;
        }
        h1 {
            color: #4682b4;
            margin-bottom: 30px;
            font-size: 28px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        .mode-selector {
            margin-bottom: 25px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }
        .mode-btn {
            background-color: #87cefa;
            color: #2c3e50;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 15px;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .mode-btn.active {
            background-color: #4682b4;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }
        .result-area {
            min-height: 180px;
            margin: 25px 0;
            padding: 25px;
            border: 3px dashed #4682b4;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #f8fbff;
            font-size: 20px;
            line-height: 1.6;
            text-align: center;
        }
        .controls {
            margin: 25px 0;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .draw-btn {
            background-color: #4682b4;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }
        .draw-btn:hover {
            background-color: #5f9ea0;
            transform: scale(1.05);
        }
        .history {
            margin-top: 30px;
            text-align: left;
            width: 100%;
        }
        .history h3 {
            color: #4682b4;
            border-bottom: 2px solid #4682b4;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        .history-list {
            max-height: 250px;
            overflow-y: auto;
            padding: 15px;
            background-color: #f8fbff;
            border-radius: 10px;
            box-shadow: inset 0 0 8px rgba(0,0,0,0.1);
        }
        .history-item {
            padding: 12px 0;
            border-bottom: 1px dotted #b0c4de;
        }
        .history-item:last-child {
            border-bottom: none;
        }
        .animation {
            animation: pulse 0.4s infinite alternate;
        }
        @keyframes pulse {
            from { opacity: 0.9; transform: scale(0.99); }
            to { opacity: 1; transform: scale(1.01); }
        }
        .category-tag {
            display: inline-block;
            background-color: #e1f0fa;
            color: #2c3e50;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 13px;
            margin: 5px 0;
            font-weight: bold;
        }
        .result-text {
            margin: 10px 0;
            font-size: 20px;
        }
        .result-type {
            font-size: 16px;
            color: #5f9ea0;
            margin-bottom: 10px;
        }
        .icon {
            font-size: 24px;
            margin: 0 5px;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #b0c4de;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #4682b4;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>âœ¨ é­”å¹»éšæœºäº‹ä»¶ & ä¸–ç•Œè§‚æŠ½å¥–ç³»ç»Ÿ âœ¨</h1>
        
        <div class="mode-selector">
            <button class="mode-btn active" data-mode="events">éšæœºäº‹ä»¶</button>
            <button class="mode-btn" data-mode="worldviews">éšæœºä¸–ç•Œè§‚</button>
            <button class="mode-btn" data-mode="both">æ··åˆæŠ½å¥–</button>
            <button class="mode-btn" data-mode="funny">æ— å˜å¤´äº‹ä»¶</button>
            <button class="mode-btn" data-mode="awkward">ç¤¾äº¤å°´å°¬</button>
            <button class="mode-btn" data-mode="magic">ç”Ÿæ´»é­”å¹»</button>
        </div>
        
        <div class="result-area" id="resultArea">
            <div>è¯·é€‰æ‹©æ¨¡å¼å¹¶ç‚¹å‡»å¼€å§‹</div>
        </div>
        
        <div class="controls">
            <button class="draw-btn" id="drawBtn">å¼€å§‹æŠ½å¥–</button>
            <button class="draw-btn" id="resetBtn">é‡ç½®å†å²</button>
        </div>
        
        <div class="history">
            <h3>ğŸ“œ æŠ½å¥–å†å²è®°å½• (æœ€è¿‘20æ¡)</h3>
            <div class="history-list" id="historyList"></div>
        </div>
    </div>

    <script>
        // é¢„è®¾æ•°æ® - åŒ…å«æ‰€æœ‰æ–°æ·»åŠ çš„å†…å®¹
        const eventData = {
            // åŸæœ‰äº‹ä»¶
            daily: [
                "åœ¨å…¬å›­é•¿æ¤…ä¸Šå‘ç°ä¸€æœ¬ç¥ç§˜æ—¥è®°",
                "æ”¶åˆ°ä¸€å°æ²¡æœ‰ç½²åçš„æƒ…ä¹¦",
                "æœ€å–œæ¬¢çš„å’–å•¡åº—ä»Šå¤©æ¨å‡ºå¥‡æ€ªçš„æ–°å£å‘³",
                "å‘ç°é‚»å±…å®¶çš„çŒ«ä¼šå¼€å†°ç®±",
                "æ‰‹æœºè‡ªåŠ¨æ’­æ”¾ä¸€é¦–ä½ ä»æœªå¬è¿‡çš„æ­Œ"
            ],
            fantasy: [
                "è·å¾—èƒ½å¬æ‡‚åŠ¨ç‰©è¯­è¨€çš„èƒ½åŠ›ï¼ŒæŒç»­24å°æ—¶",
                "å‘ç°è¡£æŸœé€šå‘å¦ä¸€ä¸ªä¸–ç•Œ",
                "æœˆäº®å˜æˆæ–¹å½¢æŒç»­ä¸€æ™š",
                "æ‰€æœ‰ç”µå­è®¾å¤‡å¼€å§‹æ˜¾ç¤ºå€’è®¡æ—¶",
                "è·å¾—ä¸€æœ¬èƒ½æ”¹å˜ç°å®çš„ç¬”è®°æœ¬(åªèƒ½ä½¿ç”¨ä¸€æ¬¡)"
            ],
            career: [
                "æ”¶åˆ°æ¢¦æƒ³å…¬å¸çš„é¢è¯•é‚€è¯·",
                "è¢«é‚€è¯·å‚åŠ è¡Œä¸šé¡¶å°–ä¼šè®®",
                "å¶ç„¶ç»“è¯†èƒ½æ”¹å˜ä½ èŒä¸šç”Ÿæ¶¯çš„è´µäºº",
                "è·å¾—ä¸€ä¸ªæµ·å¤–å·¥ä½œæœºä¼š",
                "ä½ çš„åˆ›æ„è¢«å…¬å¸é«˜å±‚é‡‡çº³"
            ],
            
            // æ–°æ·»åŠ çš„äº‹ä»¶åˆ†ç±»
            funny: [
                "ä¸€è§‰é†’æ¥ï¼Œå‘ç°è‡ªå·±çš„å¤´å‘å˜æˆäº†å½©è™¹è‰²",
                "å‡ºé—¨è¸©åˆ°é¦™è•‰çš®ï¼Œç»“æœæ»‘è¿›äº†å½©ç¥¨åº—å¹¶ä¸­å¥–",
                "å…»çš„ä»“é¼ çªç„¶å¼€å§‹ç”¨ä½ çš„ç”µè„‘æ‰“æ¸¸æˆï¼Œè¿˜æ¯”ä½ å¼º",
                "ç‚¹å¤–å–ï¼Œå¤–å–å°å“¥ç©¿ç€æé¾™æœé€é¤",
                "æ‰“å–·åšæ—¶ï¼Œéš”å£é‚»å±…çš„ç‹—ä¹Ÿè·Ÿç€'é˜¿åš'ä¸€å£°",
                "æ‰‹æœºè‡ªåŠ¨æŠŠæ‰€æœ‰äººçš„è„¸Pæˆè¡¨æƒ…åŒ…ï¼ŒåŒ…æ‹¬è€æ¿",
                "å®¶é‡Œçš„Wi-Fiåå­—çªç„¶å˜æˆ'éš”å£è€ç‹ç½‘ç»œ'",
                "è¶…å¸‚æ”¶é“¶å‘˜åšæŒç”¨'çŸ³å¤´å‰ªåˆ€å¸ƒ'å†³å®šæŠ˜æ‰£",
                "æ´—æ¾¡æ—¶ï¼Œæ²æµ´éœ²ç“¶çªç„¶å¼€å£è¯´è¯ï¼š'å…„å¼Ÿï¼Œæ“èƒŒå—ï¼Ÿ'",
                "å…»çš„ä»™äººæŒçªç„¶é•¿å‡ºæ‰‹è‡‚ï¼Œå¹¶å¼€å§‹æ¯”åˆ’'æ¥å•Šï¼Œç¢°æˆ‘å•Š'"
            ],
            
            awkward: [
                "åœ¨ç”µæ¢¯é‡Œæ”¾äº†ä¸ªå±ï¼Œç»“æœç”µæ¢¯AIè¯´ï¼š'ç©ºæ°”è´¨é‡ä¸‹é™ï¼Œå·²ä¸ºæ‚¨å¼€å¯æ¢æ°”æ¨¡å¼'",
                "ç›¸äº²å¯¹è±¡å¸¦äº†ä¸€åªç¾Šé©¼èµ´çº¦ï¼Œå¹¶åšæŒè®©å®ƒå…ˆç‚¹èœ",
                "å¼€ä¼šæ—¶ï¼ŒPPTè‡ªåŠ¨æ’­æ”¾ä½ çš„ç«¥å¹´ä¸‘ç…§",
                "è€æ¿å‘é”™ç¾¤ï¼ŒæŠŠ'å¥½æƒ³è¾èŒ'å‘åˆ°äº†å…¬å¸å¤§ç¾¤ï¼Œç»“æœå…¨å…¬å¸+1",
                "é™Œç”Ÿäººçªç„¶é€’ç»™ä½ ä¸€æ ¹æ³•æ£ï¼Œå¹¶è¯´ï¼š'è¿™æ˜¯ä½ çš„å‘½è¿ä¹‹æ–'",
                "åœ¨å¥èº«æˆ¿è·‘æ­¥ï¼Œè·‘æ­¥æœºçªç„¶æ’­æ”¾ã€Šæ±Ÿå—Styleã€‹å¹¶è‡ªåŠ¨åŠ é€Ÿ",
                "ç‚¹å’–å•¡æ—¶ï¼Œå’–å•¡å¸ˆè¯´ï¼š'ä»Šå¤©çš„éšè—èœå•æ˜¯ç¤¾ç•œçš„çœ¼æ³ªï¼Œè¦è¯•è¯•å—ï¼Ÿ'",
                "å¤–å–è®¢å•å¤‡æ³¨'ä¸è¦é¦™èœ'ï¼Œç»“æœæ”¶åˆ°ä¸€ç›’é¦™èœå’Œçº¸æ¡'è¿™æ˜¯å‘½è¿çš„å®‰æ’'",
                "å»é¢è¯•ï¼ŒHRçªç„¶é—®ï¼š'å¦‚æœå˜æˆé©¬æ¡¶ï¼Œä½ ä¼šæ€ä¹ˆå½¢å®¹è‡ªå·±ï¼Ÿ'",
                "åå…¬äº¤ï¼Œå¸æœºçªç„¶è¯´ï¼š'ä¸‹ä¸€ç«™ï¼Œç«æ˜Ÿï¼Œè¯·å‡†å¤‡å¤ªç©ºæœ'"
            ],
            
            magic: [
                "å†°ç®±é‡Œçš„é£Ÿç‰©å¼€å§‹ç»„é˜Ÿç©èº²çŒ«çŒ«",
                "å…»çš„é±¼çªç„¶è·³å‡ºé±¼ç¼¸ï¼Œå¹¶åœ¨åœ°ä¸Šå†™'æˆ‘è¦è‡ªç”±'",
                "å®¶é‡Œçš„æ‰«åœ°æœºå™¨äººå­¦ä¼šéª‚è„è¯",
                "å¤©æ°”é¢„æŠ¥è¯´ä»Šå¤©ä¼šä¸‹'è–¯ç‰‡é›¨'ï¼Œç»“æœçœŸçš„ä¸‹äº†",
                "ç½‘è´­'éšèº«æ–—ç¯·'ï¼Œç»“æœæ”¶åˆ°ä¸€ä»¶é€æ˜é›¨è¡£",
                "ç¡è§‰æ—¶ï¼ŒåºŠçªç„¶è¯´ï¼š'å…„å¼Ÿï¼Œä½ è¯¥å‡è‚¥äº†'",
                "è‡ªåŠ¨å¯¼èˆªå¸¦ä½ ç»•äº†10åœˆï¼Œæœ€åè¯´ï¼š'å…¶å®æˆ‘åªæ˜¯æƒ³å¤šé™ªé™ªä½ '",
                "å¾®æ³¢ç‚‰åŠ çƒ­é£Ÿç‰©æ—¶ï¼Œçªç„¶æ’­æ”¾ã€ŠèˆŒå°–ä¸Šçš„ä¸­å›½ã€‹BGM",
                "å…»çš„çŒ«çªç„¶ç”¨ä½ çš„è´¦å·ç›´æ’­ï¼Œå¹¶æ”¶è·10ä¸‡ç²‰ä¸",
                "æ—©ä¸Šåˆ·ç‰™ï¼Œç‰™è†æŒ¤å‡ºæ¥æ˜¯å½©è™¹è‰²ï¼Œå¹¶é™„å¸¦çº¸æ¡'ä»Šå¤©ä¼šæ˜¯ç¥å¥‡çš„ä¸€å¤©'"
            ]
        };

        const worldviewData = {
            // åŸæœ‰ä¸–ç•Œè§‚
            original: [
                "è¿™ä¸ªä¸–ç•Œæ‰€æœ‰æƒ…ç»ªä¼šå‡ç»“æˆå½©è‰²æ™¶ä½“",
                "äººç±»ç¡çœ æ—¶ä¼šè¿›å…¥é›†ä½“æ¢¦å¢ƒç©ºé—´",
                "æ¯ä¸ªäººçš„å½±å­è—ç€ç¬¬äºŒäººæ ¼",
                "å›¾ä¹¦é¦†æœ€æ·±å¤„çš„ä¹¦èƒ½æ”¹å†™ç°å®",
                "é›¨æ°´å«æœ‰å¾®é‡è®°å¿†ä¿®æ”¹ç‰©è´¨"
            ],
            
            // æ–°æ·»åŠ çš„ä¸–ç•Œè§‚åˆ†ç±»
            fantasy: [
                "æ¯ä¸ªæ»¡æœˆå¤œäººç±»ä¼šéšæœºäº¤æ¢èº«ä½“",
                "åŸå¸‚ä¸Šç©ºæ¼‚æµ®ç€å¯å±…ä½çš„äº‘å²›ç¾¤",
                "æ‰€æœ‰è°è¨€ä¼šå…·è±¡åŒ–æˆæ°”æ³¡æ¼‚æµ®",
                "ä¹¦åº—é‡Œæœ‰æœ¬ä¼šè‡ªåŠ¨ç»­å†™å‘½è¿çš„ä¹¦",
                "é›¨æ°´èƒ½å†²åˆ·æ‰24å°æ—¶å†…çš„è®°å¿†",
                "åœ°é“æœ«ç­è½¦é€šå¾€æ¢¦å¢ƒä¸­è½¬ç«™",
                "äººç±»çš„æƒ…ç»ªä¼šç”Ÿé•¿æˆéšèº«æ¤ç‰©",
                "åºŸå¼ƒç©å…·åœ¨åˆå¤œä¼šè·å¾—ç”Ÿå‘½",
                "ä¸–ç•Œçš„è‰²å½©é¥±å’Œåº¦éšå¿ƒæƒ…å˜åŒ–",
                "å­˜åœ¨ä¸“é—¨å›æ”¶é—æ†¾çš„å½“é“º"
            ],
            
            scifi: [
                "åœ°çƒæ˜¯é«˜ç­‰æ–‡æ˜çš„å®éªŒæ²™ç›’",
                "æ‰€æœ‰ç§‘æŠ€äº§å“æœ‰1%æ¥è‡ªæœªæ¥",
                "å¤§æ°”å±‚å¤–æœ‰é€æ˜é˜²æŠ¤ç½©åŒ…è£¹",
                "äººç±»å¤§è„‘å¯è¿æ¥Wi-Fiç½‘ç»œ",
                "æœˆçƒèƒŒé¢æ˜¯å…¨æ¯æŠ•å½±ä¼ªè£…",
                "å·²ç­ç»ç”Ÿç‰©ç”Ÿæ´»åœ¨ç¬¬å››ç»´åº¦",
                "å¹³è¡Œå®‡å®™åœ¨é•œé¢ä¸–ç•Œäº¤æ±‡",
                "æ—¶é—´æµé€Ÿå­˜åœ¨éšå½¢è°ƒèŠ‚é˜€",
                "éƒ¨åˆ†äººç±»æºå¸¦å¤–æ˜ŸåŸºå› ç‰‡æ®µ",
                "å…¨çƒç½‘ç»œç”±é‡å­ç”Ÿç‰©æ“æ§"
            ],
            
            mystery: [
                "æ¯åº§æ¡¥ä¸‹ä½ç€è®°å¿†åå™¬è€…",
                "åˆå¤œç”µå°æ¥æ”¶äº¡è€…æ¥ç”µ",
                "åŸå¸‚åœ°åº•åŸ‹ç€å·¨å‹ç”Ÿç‰©éª¨éª¼",
                "æ‰€æœ‰è‚–åƒç”»ä¼šç¼“æ…¢å˜åŒ–",
                "é›¨ä¼èƒ½çŸ­æš‚éš”ç»ç‰©ç†è§„åˆ™",
                "å­˜åœ¨ä¸“é—¨è´©å–å·§åˆçš„é»‘å¸‚",
                "éƒ¨åˆ†è·¯ç¯æ˜¯ç›‘è§†å™¨ä¼ªè£…",
                "æŠ¥çº¸ä¼šæå‰åˆŠè½½æ˜æ—¥æ–°é—»",
                "ç”µæ¢¯æŒ‰é’®è—æœ‰éšè—æ¥¼å±‚",
                "äºŒæ‰‹ç‰©å“é™„ç€å‰ä»»ä¸»äººçµé­‚"
            ],
            
            heartwarming: [
                "æµæ˜Ÿå…¶å®æ˜¯å®‡å®™é‚®å·®",
                "è’²å…¬è‹±ä¼ æ’­ç§˜å¯†æ„¿æœ›",
                "å½©è™¹å°½å¤´æœ‰ç¤¼ç‰©æ´¾å‘ç«™",
                "åŒ—æå…‰èƒ½æ²»æ„ˆå¿ƒçµåˆ›ä¼¤",
                "çŒ«å’ªæŒç®¡å¤©æ°”è°ƒèŠ‚æƒ",
                "äº‘æœµæ˜¯å¤©ç©ºçš„æ£‰èŠ±ç³–å‚",
                "é£é“ƒå®é™…æ˜¯ç²¾çµé—¨é“ƒ",
                "è¤ç«è™«è£…è½½è¿·è·¯æŒ‡å—é’ˆ",
                "æµ·æµªä¼šå”±æ‘‡ç¯®æ›²",
                "è½å¶ç»„æˆå¤§åœ°å¯†ç "
            ]
        };

        // è·å–DOMå…ƒç´ 
        const resultArea = document.getElementById('resultArea');
        const drawBtn = document.getElementById('drawBtn');
        const resetBtn = document.getElementById('resetBtn');
        const historyList = document.getElementById('historyList');
        const modeBtns = document.querySelectorAll('.mode-btn');
        
        // å˜é‡åˆå§‹åŒ–
        let currentMode = 'events';
        let isDrawing = false;
        let drawInterval = null;
        let historyItems = [];
        
        // æ¨¡å¼åˆ‡æ¢
        modeBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                modeBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentMode = this.dataset.mode;
                resetDraw();
            });
        });
        
        // å¼€å§‹æŠ½å¥–
        drawBtn.addEventListener('click', function() {
            if (isDrawing) {
                stopDrawing();
            } else {
                startDrawing();
            }
        });
        
        // é‡ç½®å†å²
        resetBtn.addEventListener('click', function() {
            historyItems = [];
            updateHistory();
            resultArea.innerHTML = `<div>å†å²è®°å½•å·²é‡ç½®ï¼Œè¯·ç‚¹å‡»å¼€å§‹æŠ½å¥–</div>`;
        });
        
        // å¼€å§‹æŠ½å¥–åŠ¨ç”»
        function startDrawing() {
            isDrawing = true;
            drawBtn.textContent = 'åœæ­¢æŠ½å¥–';
            resultArea.classList.add('animation');
            
            // å¿«é€Ÿåˆ‡æ¢æ˜¾ç¤ºä¸åŒç»“æœ
            drawInterval = setInterval(() => {
                const randomResult = getRandomResult();
                displayResult(randomResult, false);
            }, 100);
        }
        
        // åœæ­¢æŠ½å¥–å¹¶ç¡®å®šç»“æœ
        function stopDrawing() {
            isDrawing = false;
            clearInterval(drawInterval);
            drawBtn.textContent = 'å¼€å§‹æŠ½å¥–';
            resultArea.classList.remove('animation');
            
            // ç¡®å®šæœ€ç»ˆç»“æœ
            const finalResult = getRandomResult();
            displayResult(finalResult, true);
            
            // æ·»åŠ åˆ°å†å²è®°å½•
            historyItems.unshift({
                text: finalResult.text,
                type: finalResult.type,
                category: finalResult.category,
                time: new Date()
            });
            
            // åªä¿ç•™æœ€è¿‘20æ¡è®°å½•
            if (historyItems.length > 20) {
                historyItems = historyItems.slice(0, 20);
            }
            
            updateHistory();
        }
        
        // é‡ç½®æŠ½å¥–çŠ¶æ€
        function resetDraw() {
            if (isDrawing) {
                stopDrawing();
            }
            resultArea.innerHTML = `<div>å½“å‰æ¨¡å¼: ${getModeName(currentMode)}ï¼Œç‚¹å‡»æŒ‰é’®å¼€å§‹æŠ½å¥–</div>`;
        }
        
        // è·å–éšæœºç»“æœ
        function getRandomResult() {
            switch(currentMode) {
                case 'events':
                    return getRandomEvent('daily,fantasy,career');
                case 'worldviews':
                    return getRandomWorldview('original,fantasy,scifi,mystery,heartwarming');
                case 'both':
                    return Math.random() < 0.7 ? 
                        getRandomEvent('daily,fantasy,career') : 
                        getRandomWorldview('original,fantasy,scifi,mystery,heartwarming');
                case 'funny':
                    return getRandomEvent('funny');
                case 'awkward':
                    return getRandomEvent('awkward');
                case 'magic':
                    return getRandomEvent('magic');
                default:
                    return getRandomEvent('daily,fantasy,career');
            }
        }
        
        // è·å–éšæœºäº‹ä»¶
        function getRandomEvent(categories) {
            const categoryList = categories.split(',');
            let allEvents = [];
            
            categoryList.forEach(cat => {
                allEvents = allEvents.concat(
                    eventData[cat].map(e => ({
                        text: e,
                        category: getCategoryName(cat)
                    }))
                );
            });
            
            const randomIndex = Math.floor(Math.random() * allEvents.length);
            return {
                text: allEvents[randomIndex].text,
                type: 'event',
                category: allEvents[randomIndex].category
            };
        }
        
        // è·å–éšæœºä¸–ç•Œè§‚
        function getRandomWorldview(categories) {
            const categoryList = categories.split(',');
            let allWorldviews = [];
            
            categoryList.forEach(cat => {
                allWorldviews = allWorldviews.concat(
                    worldviewData[cat].map(w => ({
                        text: w,
                        category: getCategoryName(cat)
                    }))
                );
            });
            
            const randomIndex = Math.floor(Math.random() * allWorldviews.length);
            return {
                text: allWorldviews[randomIndex].text,
                type: 'worldview',
                category: allWorldviews[randomIndex].category
            };
        }
        
        // æ˜¾ç¤ºç»“æœ
        function displayResult(result, isFinal) {
            if (isFinal) {
                const typeIcon = result.type === 'event' ? 'ğŸ²' : 'ğŸŒ';
                const typeText = result.type === 'event' ? 'äº‹ä»¶' : 'ä¸–ç•Œè§‚';
                
                resultArea.innerHTML = `
                    <div class="result-type">${typeIcon} æŠ½ä¸­${typeText} Â· <span class="category-tag">${result.category}</span></div>
                    <div class="result-text">${result.text}</div>
                `;
            } else {
                // æŠ½å¥–è¿‡ç¨‹ä¸­çš„å¿«é€Ÿåˆ‡æ¢æ˜¾ç¤º
                resultArea.innerHTML = `<div class="result-text">${result.text}</div>`;
            }
        }
        
        // æ›´æ–°å†å²è®°å½•
        function updateHistory() {
            historyList.innerHTML = '';
            
            if (historyItems.length === 0) {
                historyList.innerHTML = '<div style="text-align: center; color: #888;">æš‚æ— å†å²è®°å½•</div>';
                return;
            }
            
            historyItems.forEach((item, index) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                
                const timeStr = item.time.toLocaleTimeString();
                const typeIcon = item.type === 'event' ? 'ğŸ²' : 'ğŸŒ';
                
                historyItem.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <small style="color: #666;">${timeStr}</small>
                            <span class="category-tag" style="margin-left: 8px;">${item.category}</span>
                        </div>
                        <div style="font-size: 18px;">${typeIcon}</div>
                    </div>
                    <div style="margin-top: 5px;">${item.text}</div>
                `;
                historyList.appendChild(historyItem);
            });
        }
        
        // è·å–æ¨¡å¼åç§°
        function getModeName(mode) {
            const modeNames = {
                'events': 'éšæœºäº‹ä»¶',
                'worldviews': 'éšæœºä¸–ç•Œè§‚',
                'both': 'æ··åˆæŠ½å¥–',
                'funny': 'æ— å˜å¤´äº‹ä»¶',
                'awkward': 'ç¤¾äº¤å°´å°¬',
                'magic': 'ç”Ÿæ´»é­”å¹»'
            };
            return modeNames[mode] || mode;
        }
        
        // è·å–åˆ†ç±»åç§°
        function getCategoryName(category) {
            const categoryNames = {
                'daily': 'æ—¥å¸¸ç”Ÿæ´»',
                'fantasy': 'å¥‡å¹»å†’é™©',
                'career': 'èŒä¸šå‘å±•',
                'funny': 'æ— å˜å¤´',
                'awkward': 'ç¤¾äº¤å°´å°¬',
                'magic': 'ç”Ÿæ´»é­”å¹»',
                'original': 'ç»å…¸ä¸–ç•Œè§‚',
                'scifi': 'ç§‘å¹»ä¸–ç•Œè§‚',
                'mystery': 'æ‚¬ç–‘ä¸–ç•Œè§‚',
                'heartwarming': 'æ¸©é¦¨ä¸–ç•Œè§‚'
            };
            return categoryNames[category] || category;
        }
    </script>
</body>
</html>